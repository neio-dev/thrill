!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=332)}({332:function(e,t,a){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t,a){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,a){return t&&p(e.prototype,t),a&&p(e,a),e}a.r(t);var d=function(){function e(){u(this,e),this._listeners=[]}return y(e,[{key:"initProperties",value:function(){for(var t=this,a=function(){var a=n[r],i=t[a];if(["_listeners","dispatch"].includes(a))return"continue";Object.defineProperty(t,a,{get:function(){return t["_".concat(a)]},set:function(e){t["_".concat(a)]=e,t.dispatch()}}),i instanceof e&&t[a].onChange(t.dispatch.bind(t))},r=0,n=Object.keys(this);r<n.length;r++)a()}},{key:"onChange",value:function(e){this._listeners.push(e)}},{key:"dispatch",value:function(){var e=!0,t=!1,a=void 0;try{for(var r,n=this._listeners[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var i=r.value;"function"==typeof i&&i(this)}}catch(e){t=!0,a=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}}}]),e}(),f=function(e){function t(e,a){var r;return u(this,t),(r=o(this,l(t).call(this)))._x=e,r._y=a,r}return c(t,e),y(t,[{key:"setTile",value:function(e,t){this._x=e,this._y=t}}]),t}(d),v=function(e){function t(e,a){var r;return u(this,t),(r=o(this,l(t).call(this,e,a)))._hasPlayer=0,r.reachable=1,r}return c(t,e),y(t,[{key:"getPos",value:function(){return[this._x,this._y]}},{key:"isObstacle",value:function(){return this instanceof m}},{key:"isEmpty",value:function(){return this instanceof _}},{key:"hasPlayer",value:function(){var e=!0,t=!1,a=void 0;try{for(var r,n=I.players[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var i=r.value;if(this._x===i.char._x&&this._y===i.char._y)return!0}}catch(e){t=!0,a=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}return!1}},{key:"hasItem",value:function(){return 1===this._hasItem[0]}}]),t}(f),_=function(e){function t(e,a){var r;return u(this,t),(r=o(this,l(t).call(this,e,a)))._type="Empty",r._hasItem=[0],r}return c(t,e),y(t,[{key:"reachable",set:function(e){this._reachable=e},get:function(){return this._reachable}},{key:"hasPlayer",set:function(e){this._hasPlayer=e},get:function(){return this._hasPlayer}}]),t}(v),m=function(e){function t(e,a){var r;return u(this,t),(r=o(this,l(t).call(this,e,a)))._type="Obstacle",r._reachable=0,r}return c(t,e),t}(v),b=function(e){function t(e,a){var r;return u(this,t),(r=o(this,l(t).call(this,e,a)))._model="Barrel",r}return c(t,e),t}(m),g=function(e){function t(e,a){var r;return u(this,t),(r=o(this,l(t).call(this,e,a)))._model="BarbedWire",r}return c(t,e),t}(m),T=function(e){function t(e,a){var r;return u(this,t),(r=o(this,l(t).call(this,e,a)))._model="Woodbox",r}return c(t,e),t}(m),w=function(){function e(t){var a=this;u(this,e),this.squareNumbers=[25,36,49,64,81,100],this.squareNumbers.forEach((function(e,r){return t<e&&t>a.squareNumbers[r-1]?(console.error("".concat(t," isn't a square number.\n            Changed value to nearest superior value. (").concat(e,")\n            Possible values are ").concat(a.squareNumbers)),t=e):t})),this.tiles=[],this.lineOfTiles=Math.floor(Math.sqrt(t));for(var r=0;r<this.lineOfTiles;++r)for(var n=0;n<this.lineOfTiles;++n){if(Math.random()<.9)this.tiles.push(new _(n,r));else{var i=Math.random();i<.33?this.tiles.push(new b(n,r)):i<.66?this.tiles.push(new g(n,r)):i<=1&&this.tiles.push(new T(n,r))}}}return y(e,[{key:"getTile",value:function(e,t){var a=!0,r=!1,n=void 0;try{for(var i,s=this.tiles[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var o=i.value;if(o._x===e&&o._y===t)return o}}catch(e){r=!0,n=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw n}}return!1}},{key:"isPlayerNear",value:function(e){var t=!1,a=this.tiles[e],r=[];r.push(this.getTile(a._x+1,a._y)),r.push(this.getTile(a._x-1,a._y)),r.push(this.getTile(a._x,a._y+1)),r.push(this.getTile(a._x,a._y-1));for(var n=0,i=r;n<i.length;n++){var s=i[n];if(void 0!==s&&1===s._hasPlayer)return t=!0}return t}}]),e}(),k=function(e){function t(e,a){var r;return u(this,t),(r=o(this,l(t).call(this,e,a)))._equipedItem={},r.onFight=0,r.initProperties(),r.onFight=0,r._equipedItem={name:"Poings",amount:15},r}return c(t,e),y(t,[{key:"getTile",value:function(){return this._x+this._y*Math.floor(Math.sqrt(I.board.tiles.length))}},{key:"getPos",value:function(){return[this._x,this._y]}},{key:"setTile",value:function(e,a){void 0!==this._x&&void 0!==this._y&&(I.board.getTile(this._x,this._y)._hasPlayer=0),i(l(t.prototype),"setTile",this).call(this,e,a);var r=I.board.getTile(e,a);r._hasPlayer=1,r.reachable=0}},{key:"move",value:function(e,a){i(l(t.prototype),"move",this).call(this,e,a),this.setTile(e,a)}},{key:"checkItem",value:function(e,t){var a=I.items[e];this instanceof[P,x][a.targetChar-1]&&this.equipItem(a,t)}},{key:"equipItem",value:function(e,t){var a=this._equipedItem,r=I.getItemIndex(a.name);return this._equipedItem=e,"Poings"===a.name?t._hasItem=[0]:t._hasItem=[1,r],t._hasItem}},{key:"movementPoint",get:function(){return this._movementPoint},set:function(e){this._movementPoint=e}},{key:"equipedItem",get:function(){return this._equipedItem},set:function(e){this._equipedItem=I.items[e]}}]),t}(function(e){function t(e,a){var r;return u(this,t),(r=o(this,l(t).call(this,e,a))).steps=[],r}return c(t,e),y(t,[{key:"move",value:function(e,t){this._x!==e?this.movementPoint-=Math.abs(e-this._x):this._y!==t&&(this.movementPoint-=Math.abs(t-this._y)),this.setTile(e,t)}}]),t}(f)),P=function(e){function t(e,a){var r;return u(this,t),(r=o(this,l(t).call(this,e,a))).model=["Adam"],r.name=r.model[0],r._movementPoint=3,r.defaultMovePoints=r.movementPoint,r._health=100,r}return c(t,e),t}(k),x=function(e){function t(e,a){var r;return u(this,t),(r=o(this,l(t).call(this,e,a))).model=["Billy","Myers","Clown"],r.name=r.model[0],r._movementPoint=2,r.defaultMovePoints=r.movementPoint,r}return c(t,e),t}(k),C=function e(t,a,r){u(this,e),this.number=t,this.char=1===a?new P(4,3):new x(4,3),this.char.name=r instanceof String?r:this.char.model[r]},S=function e(t,a,r,n){switch(u(this,e),this.itemsType=["Damage","Healing","Mover","Boost"],this.name=t,this.type=this.itemsType[a],this.amount=r,this.targetChar=n,a){case 0:this.desc="Occasionne ".concat(this.amount," de dommages.");break;case 1:this.desc="Soigne ".concat(this.amount," de points de vie.");break;case 2:switch(n){case 1:this.desc="Repousse de ".concat(this.amount," case.");break;case 2:this.desc="Attire de ".concat(this.amount," case.")}break;case 3:this.desc="Augmente de ".concat(this.amount," les points de mouvement du personnage.")}switch(n){case 1:this.descChar="<span class='tooltiptext--survivor'>Pour Survivant.</span>";break;case 2:this.descChar="<span class='tooltiptext--chaser'>Pour Chaser.</span>"}},M=function(e){function t(){var e;return u(this,t),(e=o(this,l(t).call(this))).turn=1,e.initProperties(),e.playerModel=[],e.players=[new C(1,1),new C(2,2)],e.playersAction=[],e.players[0].char instanceof P?e.activePlayer=0:e.activePlayer=1,e.totalTurn=0,e.escapeTurn=9,e.board=new w(64),e}return c(t,e),y(t,[{key:"getCharModels",value:function(e){if("survival"===e){var t=new x(0,0),a=new P(0,0);return[n(t.model),n(a.model)]}return n(new x(0,0).model)}},{key:"playerSpawn",value:function(){var e=!0,t=!1,a=void 0;try{for(var n,i=this.players.entries()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var s=r(n.value,2),o=s[0],l=s[1];l.char.name=this.playerModel[o];for(var c=Math.floor(Math.random()*this.board.tiles.length);this.board.tiles[c]instanceof m||1===this.board.tiles[c].hasPlayer;)c=Math.floor(Math.random()*this.board.tiles.length);if(this.board.tiles[c]._hasItem=[0],l.char.setTile(this.board.tiles[c].getPos()[0],this.board.tiles[c].getPos()[1]),this.board.tiles[c]._reachable=0,this.board.tiles[c].hasPlayer=1,this.board.isPlayerNear(this.players[0].char.getTile()))return this.playerSpawn()}}catch(e){t=!0,a=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}}},{key:"itemSpawn",value:function(){var e=!0,t=!1,a=void 0;try{for(var r,n=this.board.tiles[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var i=r.value;i._hasItem&&1===i._hasItem[0]&&(i._hasItem=[0])}}catch(e){t=!0,a=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}for(var s=0;s<4;++s){for(var o=Math.floor(Math.random()*this.board.tiles.length);this.board.tiles[o]instanceof m||1===this.board.tiles[o]._hasPlayer||1===this.board.tiles[o]._hasItem[0];)o=Math.floor(Math.random()*this.board.tiles.length);var l=Math.floor(Math.random()*this.items.length);this.board.tiles[o]._hasItem=[1,l],console.log(this)}}},{key:"nextTurn",value:function(e){if(0===this.players[0].char.onFight)this.players[this.activePlayer].char.movementPoint=this.players[this.activePlayer].char.defaultMovePoints;else{var t={player:this.activePlayer,action:e};this.playersAction.push(t),this.playersAction.length>1&&this.nextFightTurn()}0===this.activePlayer?this.activePlayer=1:this.activePlayer=0,this.turn%2==0&&this.totalTurn<this.escapeTurn&&this.nextGameTurn(),this.turn+=1}},{key:"nextGameTurn",value:function(){this.totalTurn=this.turn/2,this.onFightState()||this.totalTurn%3==0&&this.itemSpawn()}},{key:"getPossibleMoves",value:function(){this.removePossibleMoves(),this.possibleBottomMovesTiles=[],this.possibleTopMovesTiles=[],this.possibleLeftMovesTiles=[],this.possibleRightMovesTiles=[],this.possibleMovesIterator=[this.possibleBottomMovesTiles,this.possibleRightMovesTiles,this.possibleLeftMovesTiles,this.possibleTopMovesTiles];var e=!0,t=!1,a=void 0;try{for(var r,i=this.possibleMovesIterator[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)for(var s=r.value,o=1;o<=this.players[this.activePlayer].char.movementPoint;o++){for(var l=!1,c=1;c<=this.players[this.activePlayer].char.movementPoint;c++)(s[o-c]instanceof m||s[o-c]instanceof _&&1===s[o-c].hasPlayer)&&(l=!0);if(!l)switch(s){case this.possibleBottomMovesTiles:s[o]=this.board.getTile(this.players[this.activePlayer].char._x,this.players[this.activePlayer].char._y+o);break;case this.possibleTopMovesTiles:s[o]=this.board.getTile(this.players[this.activePlayer].char._x,this.players[this.activePlayer].char._y-o);break;case this.possibleLeftMovesTiles:s[o]=this.board.getTile(this.players[this.activePlayer].char._x-o,this.players[this.activePlayer].char._y);break;case this.possibleRightMovesTiles:s[o]=this.board.getTile(this.players[this.activePlayer].char._x+o,this.players[this.activePlayer].char._y)}}}catch(e){t=!0,a=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}this.possibleMovesTiles=[].concat(n(this.possibleBottomMovesTiles),n(this.possibleLeftMovesTiles),n(this.possibleRightMovesTiles),n(this.possibleTopMovesTiles));var h=!0,u=!1,p=void 0;try{for(var y,d=this.possibleMovesTiles[Symbol.iterator]();!(h=(y=d.next()).done);h=!0){var f=y.value;f instanceof _&&1!==f.hasPlayer&&(f.reachable=1)}}catch(e){u=!0,p=e}finally{try{h||null==d.return||d.return()}finally{if(u)throw p}}}},{key:"removePossibleMoves",value:function(){for(var e in this.board.tiles)1===this.board.tiles[e].reachable&&(this.board.tiles[e].reachable=0)}},{key:"checkPlayersProximity",value:function(){var e=this.players[0].char,t=this.players[1].char;this.selCharProx=[e._x+1,e._x-1,e._y-1,e._y+1],e._x===t._x?t._y!==this.selCharProx[2]&&t._y!==this.selCharProx[3]||this.fight():e._y===t._y&&(t._x!==this.selCharProx[0]&&t._x!==this.selCharProx[1]||this.fight())}},{key:"getItemIndex",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,s=this.items.entries()[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=r(i.value,2),l=o[0];if(o[1].name===e)return l}}catch(e){a=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}}}]),t}(d),I=new(function(e){function t(){var e;u(this,t),(e=o(this,l(t).call(this))).players=[new C(1,2,0),new C(2,2,2)];var a=!0,r=!1,n=void 0;try{for(var i,s=e.players[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var c=i.value;c.char._movementPoint=3,c.char.defaultMovePoints=3,c.char._health=100}}catch(e){r=!0,n=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw n}}return e.items=[new S("Machette",0,35,2),new S("Hachoir",0,25,2),new S("Grappin",0,30,2),new S("Gants",0,20,2)],e.winner=0,e.mode="versus",e}return c(t,e),y(t,[{key:"fight",value:function(){var e=!0,t=!1,a=void 0;try{for(var r,n=this.players[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var i=r.value;i.char._movementPoint=0,this.removePossibleMoves(),i.char.onFight=1}}catch(e){t=!0,a=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}}},{key:"onFightState",value:function(){return 1===this.players[0].char.onFight}},{key:"nextFightTurn",value:function(){var e=this.players[this.playersAction[0].player].char._health;this.players[this.playersAction[1].player].char._health>0&&(this.players[this.playersAction[0].player].char._health>0&&("attack"===this.playersAction[0].action?"defend"===this.playersAction[1].action?this.players[this.playersAction[1].player].char._health-=this.players[this.playersAction[0].player].char._equipedItem.amount/2:(this.players[1].char._health-=this.players[0].char._equipedItem.amount,this.players[0].char._health-=this.players[1].char._equipedItem.amount):"attack"===this.playersAction[1].action&&(this.players[this.playersAction[0].player].char._health-=this.players[this.playersAction[1].player].char._equipedItem.amount/2)),this.players[this.playersAction[0].player].char._health=Math.floor(this.players[this.playersAction[0].player].char._health),this.players[this.playersAction[1].player].char._health=Math.floor(this.players[this.playersAction[1].player].char._health));var t=!0,a=!1,r=void 0;try{for(var n,i=this.players[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var s=n.value;s.char._health<0&&(s.char._health=0)}}catch(e){a=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(a)throw r}}0===this.players[this.playersAction[1].player].char._health&&0===this.players[this.playersAction[0].player].char._health&&(this.players[this.playersAction[0].player].char._health=e),0===this.players[this.playersAction[1].player].char._health?this.winner=this.playersAction[0].player+1:0===this.players[this.playersAction[0].player].char._health&&(this.winner=this.playersAction[1].player+1),this.playersAction.length=0}}]),t}(M));new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$(document).on("click",".intro--newgame",(function(){A.gameModeSelection()})),$(document).on("click",".intro--gameMode__box:eq(1)",(function(){A.characterSelection("versus")})),[0,1].forEach((function(e){$(document).on("click",".intro--characterSelection__player:eq(".concat(e,")"),(function(t){event.target.classList.contains("intro--characterSelection__char")&&(I.playerModel[e]=A.characterSelector(e,t),console.info(I.playerModel),void 0!==I.playerModel[0]&&I.playerModel.length>1&&A.startButton())}))})),$(document).on("click",".intro--characterSelection__startButton",(function(){I.itemSpawn(),I.playerSpawn(),A.init();var e=!0,a=!1,r=void 0;try{for(var n,i=I.players[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.char.onChange((function(){return A.refresh()}))}}catch(e){a=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}I.onChange((function(){return A.refresh()})),I.onChange((function(){return A.winning(t)}))})),$(document).on("click","td",(function(){var e=$(this).find(".block")[0].classList[1].split("tile-")[1],t=I.board.tiles[e].getPos();1===I.board.tiles[e]._reachable&&(I.players[I.activePlayer].char.move(parseFloat(t[0]),parseFloat(t[1])),I.checkPlayersProximity())})),$(document).on("click","#action2",(function(){switch(I.players[0].char.onFight){case 0:I.nextTurn();break;case 1:I.nextTurn("defend")}})),$(document).on("click","#action1",(function(){switch(I.players[0].char.onFight){case 0:var e=I.board.tiles[I.players[I.activePlayer].char.getTile()],t=e._x+e._y*I.board.lineOfTiles;1===I.board.tiles[t]._hasItem[0]&&I.players[I.activePlayer].char.checkItem(I.board.tiles[t]._hasItem[1],I.board.tiles[t]);break;case 1:I.nextTurn("attack")}})),$(document).on("click",".interface--winner__newgame",(function(){location.reload()}))};function O(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.iteration=t}var t,a,r;return t=e,(a=[{key:"PlayerSpawnNearPlayer",value:function(){for(var e=0;e<this.iteration;){if(I.players[0].char._x===I.players[1].char._x-1&&I.players[0].char._y===I.players[1].char._y||I.players[0].char._x===I.players[1].char._x+1&&I.players[0].char._y===I.players[1].char._y||I.players[0].char._x===I.players[1].char._x&&I.players[0].char._y===I.players[1].char._y+1||I.players[0].char._x===I.players[1].char._x&&I.players[0].char._y===I.players[1].char._y-1){console.log(I.players[0].char.getPos()),console.log(I.players[1].char.getPos()),console.error("Mauvais spawn");break}console.info("Spawn de joueurs réussi "),e+=1,I.playerSpawn()}}},{key:"PlayerSpawnOnPlayer",value:function(){for(var e=0;e<this.iteration;){if(I.board.tiles[I.players[0].char.getTile()]===I.board.tiles[I.players[1].char.getTile()]){console.error("Mauvais spawn (Joueur sur Obstacle)");break}console.info("Spawn de joueur réussi"),e+=1,I.playerSpawn()}}},{key:"PlayerSpawnOnObstacle",value:function(){for(var e=0;e<this.iteration;){if(I.board.tiles[I.players[0].char.getTile()].isObstacle()||I.board.tiles[I.players[1].char.getTile()].isObstacle()){console.error("Mauvais spawn (Joueur sur Obstacle)");break}console.info("Spawn de joueur réussi"),e+=1,I.playerSpawn()}}}])&&O(t.prototype,a),r&&O(t,r),e}())(100);function q(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.d(t,"default",(function(){return A}));var A=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state="intro"}var t,a,r;return t=e,r=[{key:"showDamages",value:function(){}}],(a=[{key:"intro",value:function(){var e=$(".intro").css({background:'url("./assets/img/intro.gif") no-repeat',"background-size":"100%"});$("<button></button>").text("Nouvelle partie").addClass("intro--newgame").appendTo(e),$("<img>").addClass("intro--leaves").attr("src","./assets/img/intro-leaves.png").appendTo(e),$("<img>").addClass("intro--title").attr("src","./assets/img/intro-title.png").appendTo(e)}},{key:"gameModeSelection",value:function(){var e=$(".intro");$(".intro--leaves").css("animation-play-state","running"),$("<h1></h1>").text("Select game mode").addClass("intro--gameMode__tip").appendTo(e);var t=$("<div></div>").addClass("intro--gameMode").prependTo(e);$("<div></div>").addClass("intro--gameMode__box").css("background",'url("./assets/img/intro--survival.png") 0 0 no-repeat').appendTo(t),$("<div></div>").addClass("intro--gameMode__box").css("background",'url("./assets/img/intro--versus.png") 0 0 no-repeat').appendTo(t);var a=$(".intro--gameMode__box, .intro--gameMode__tip");this.slideShow(a,1e3)}},{key:"characterSelection",value:function(e){var t=$(".intro--gameMode__box, .intro--gameMode__tip");this.slideHide(t);var a=$(".intro"),r=$("<h1></h1>").text("Select character").addClass("intro--characterSelection__tip").appendTo(a);this.slideShow(r,1e3);var n=$("<div></div>").addClass("intro--characterSelection").appendTo(a);[1,2].forEach((function(t){var a=$("<div></div>").addClass("intro--characterSelection__player").appendTo(n);$("<h1></h1>").text("P".concat(t)).appendTo(a);var r=$("<div></div>").addClass("intro--characterSelection__chars").appendTo(a),i=I.getCharModels(e),s=!0,o=!1,l=void 0;try{for(var c,h=i[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var u=c.value;$("<div></div>").addClass("intro--characterSelection__char").css("background-image","url('./assets/chars/".concat(u.toLowerCase(),".png')")).appendTo(r)}}catch(e){o=!0,l=e}finally{try{s||null==h.return||h.return()}finally{if(o)throw l}}var p=$("<div></div>").addClass("intro--characterSelection__charPreview").appendTo(a);2===t&&p.css({transform:"scaleX(-1)",left:"40%"})}))}},{key:"characterSelector",value:function(e,t){$(".intro--characterSelection__player:eq(".concat(e,") > .intro--characterSelection__chars > .intro--characterSelection__char")).addClass("out"),$(".intro--characterSelection__player:eq(".concat(e,") > .intro--characterSelection__chars > .intro--characterSelection__char")).removeClass("selected"),t.target.classList.remove("out"),t.target.classList.add("selected");var a=$(".intro--characterSelection__player:eq(".concat(e,") > .intro--characterSelection__chars > .selected")).css("background-image"),r=a.split("/").pop().replace("cleanup","").split(".png")[0];return $(".intro--characterSelection__player:eq(".concat(e,") > .intro--characterSelection__charPreview")).css("background-image","none"),$(".intro--characterSelection__player:eq(".concat(e,") > .intro--characterSelection__charPreview")).css("background-image",a),r}},{key:"startButton",value:function(){var e=$(".intro");$(".intro--characterSelection__startButton").remove(),$("<button>").text("START").addClass("intro--characterSelection__startButton").appendTo(e)}},{key:"slideShow",value:function(e,t){setTimeout((function(){e.css({animation:"slidedown-show 1s forwards","animation-play-state":"running"})}),t)}},{key:"slideHide",value:function(e){e.css({animation:"slideup-hide 1s forwards","animation-play-state":"running"})}},{key:"winning",value:function(){if(I.winner){var e=$(".interface");e.empty(),e.css("pointer-events","all");var t=$("<div></div>").addClass("interface--winner").appendTo(e);$("<h1></h1>").text("PLAYER ".concat(I.winner," WINS")).addClass("interface--winner__text").appendTo(t),$("<button></button>").text("NEW GAME").addClass("interface--winner__newgame").appendTo(t),$("<button></button>").text("SHARE YOUR VICTORY").addClass("interface--winner__link").appendTo(t)}}},{key:"init",value:function(){var e=$(".intro");this.slideHide(e,1e3),setTimeout((function(){e.remove()}),105),$("table").css("animation-play-state","running");for(var t=$("tbody"),a=Math.floor(Math.sqrt(I.board.tiles.length)),r=0;r<a;++r)for(var n=$("<tr></tr>").css({transform:"translateY(".concat(19*r,"px)")}).addClass("row-".concat(r)).appendTo(t),i=0;i<a;++i){var s=i+a*r,o=$("<td></td>").css({transform:"translateX(".concat(19*i,"px)")}).addClass("col-".concat(i)).appendTo(n),l=$("<div></div>").addClass("block").addClass("tile-".concat(s)).appendTo(o),c=$("<div></div>").addClass("block--".concat(I.board.tiles[s]._type.toLowerCase())).appendTo(l);if(I.board.tiles[s].isEmpty()&&1===I.board.tiles[s]._hasItem[0]&&0===I.board.tiles[s].hasPlayer){var h=$("<div></div>").addClass("item").css("background","url(./assets/items/".concat(I.items[I.board.tiles[s]._hasItem[1]].name.toLowerCase(),".png) 0px 0px no-repeat")).appendTo(c);$("<div></div>").addClass("tooltiptext").html("<h1>".concat(I.items[I.board.tiles[s]._hasItem[1]].name,"</h1><br /><p>").concat(I.items[I.board.tiles[s]._hasItem[1]].desc,"</p><br />").concat(I.items[I.board.tiles[s]._hasItem[1]].descChar)).appendTo(h)}I.getPossibleMoves(),I.board.tiles[s].isObstacle()&&c.addClass("block--obstacle__".concat(I.board.tiles[s]._model.toLowerCase())),1===I.board.tiles[s].reachable?$(".tile-".concat(s)).addClass("block--possibleMove"):$(".tile-".concat(s)).removeClass("block--possibleMove")}$(".tile-".concat(I.players[0].char.getTile())).find("div:eq(0)").removeAttr("class").addClass("block--player").addClass("block--player__".concat(I.players[0].char.name.toLowerCase())),$(".tile-".concat(I.players[1].char.getTile())).find("div:eq(0)").removeAttr("class").addClass("block--player").addClass("block--player__".concat(I.players[1].char.name.toLowerCase())),A.interface()}},{key:"remove",value:function(){$("tbody tr").remove()}},{key:"interface",value:function(){var e=$(".interface");e.empty(),$("<div></div>").addClass("interface--element interface--fight__blason").prependTo(e),$("<div></div>").addClass("interface--element interface--button__music").prependTo(e);var t=$("<div></div>").addClass("interface--element interface--bar__totalturn").prependTo(e);if($("<p></p>").addClass("totalTurn").appendTo(t),$("<div></div>").addClass("interface--bar__totalturn__fill").appendTo(t),$("<div></div>").addClass("interface--button__action1").attr("id","action1").prependTo(e),$("<div></div>").addClass("interface--button__action2").attr("id","action2").prependTo(e),I.players.forEach((function(t){var a=$("<div></div>").addClass("interface--player interface--player__".concat(t.number)).appendTo(e);$("<div></div>").addClass("interface--element interface--player__".concat(t.number,"__char")).appendTo(a),$("<div></div>").addClass("interface--element interface--equipedItem interface--player__".concat(t.number,"__equipedItem")).appendTo(a);var r=$("<div></div>").addClass("interface--element interface--healthbar").appendTo(a);$("<div></div>").addClass("interface--healthbar__overlay").appendTo(r),2===t.number&&r.css("transform","scaleX(-1)")})),"versus"===I.mode)switch(I.players[0].char.onFight){case 1:$(".interface--button__action1").css("background","url(./assets/img/button-attack.png) no-repeat").css("left","49%"),$(".interface--button__action2").css("background","url(./assets/img/button-block.png) no-repeat"),$(".interface--fight-blason:eq(0)").css("visibility","visible"),I.board.tiles.forEach((function(e){e._hasPlayer||$(".tile-".concat(e.getPos()[0]+e.getPos()[1]*Math.floor(Math.sqrt(I.board.tiles.length)),":eq(0)")).css("filter","grayscale(100)")}));break;case 0:$("#action1").css("background","url(./assets/img/button-equip.png) no-repeat"),$("#action2").css("background","url(./assets/img/button-turn.png) no-repeat")}else $(".interface--bar__totalturn").css("visibility","visible"),$(".totalTurn").text("Tour : ".concat(I.totalTurn,"/").concat(I.escapeTurn)),$(".interface--bar__totalturn__fill").width("".concat(I.totalTurn/I.escapeTurn*100,"%"));switch(I.activePlayer){case 0:$(".interface--player__1").removeClass("interface--inactive"),$(".interface--player__2").addClass("interface--inactive");break;case 1:$(".interface--player__2").removeClass("interface--inactive"),$(".interface--player__1").addClass("interface--inactive")}for(var a=0;a<I.players.length;++a)0===I.players[a].desiredChar?$(".interface--player__".concat(a+1,"__char:eq(0)")).addClass("interface--player__char__survivor"):$(".interface--player__".concat(a+1,"__char:eq(0)")).addClass("interface--player__char__chaser"),$(".interface--player__".concat(a+1,"__char:eq(0)")).addClass("block--player__".concat(I.players[a].char.name.toLowerCase())),$(".interface--player__".concat(a+1,"__equipedItem:eq(0)")).css("background","url(./assets/items/".concat(I.players[a].char.equipedItem.name.toLowerCase(),".png) center center no-repeat, black")),$(".interface--player__".concat(a+1," .interface--healthbar__overlay")).css({width:"".concat(I.players[a].char._health,"%")}).text("".concat(I.players[a].char._health,"/100"))}},{key:"refresh",value:function(){A.remove(),A.init()}}])&&q(t.prototype,a),r&&q(t,r),e}());A.intro()}});